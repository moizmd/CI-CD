Started by user admin
Obtained Jenkinsfile.txt from git https://github.com/Dileeprithvi/CI-CD-Jks-K8s-SSH.git
Running in Durability level: MAX_SURVIVABILITY
[Pipeline] Start of Pipeline
[Pipeline] getArtifactoryServer
[Pipeline] newMavenBuild
[Pipeline] node
Running on Jenkins in /var/lib/jenkins/workspace/k8ssh
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Declarative: Checkout SCM)
[Pipeline] checkout
No credentials specified
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/Dileeprithvi/CI-CD-Jks-K8s-SSH.git # timeout=10
Fetching upstream changes from https://github.com/Dileeprithvi/CI-CD-Jks-K8s-SSH.git
 > git --version # timeout=10
 > git fetch --tags --progress https://github.com/Dileeprithvi/CI-CD-Jks-K8s-SSH.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/working^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/working^{commit} # timeout=10
Checking out Revision 0fd5a829a7d8d4d5e486fe345243b7cef2eae78b (refs/remotes/origin/working)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f 0fd5a829a7d8d4d5e486fe345243b7cef2eae78b # timeout=10
Commit message: "Update deployment.yml"
 > git rev-list --no-walk 583de32a1c136d2901f34261b5997e1230c033c3 # timeout=10
[Pipeline] }
[Pipeline] // stage
[Pipeline] withEnv
[Pipeline] {
[Pipeline] tool
[Pipeline] sh
+ git rev-parse HEAD
[Pipeline] withEnv
[Pipeline] {
[Pipeline] timestamps
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Declarative: Tool Install)
[Pipeline] tool
[Pipeline] envVarsForTool
[Pipeline] tool
[Pipeline] envVarsForTool
[Pipeline] }
[Pipeline] // stage
[Pipeline] withEnv
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Artifactory_Configuration)
[Pipeline] tool
[Pipeline] envVarsForTool
[Pipeline] tool
[Pipeline] envVarsForTool
[Pipeline] withEnv
[Pipeline] {
[Pipeline] script
[Pipeline] {
[Pipeline] newBuildInfo
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Execute_Maven)
[Pipeline] tool
[Pipeline] envVarsForTool
[Pipeline] tool
[Pipeline] envVarsForTool
[Pipeline] withEnv
[Pipeline] {
[Pipeline] script
[Pipeline] {
[Pipeline] artifactoryMavenBuild
[2020-06-02T13:40:26.691Z] Jenkins Artifactory Plugin version: 3.6.2
[2020-06-02T13:40:26.698Z] Artifactory integration is enabled
[2020-06-02T13:40:26.700Z] [k8ssh] $ /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.252.b09-2.el7_8.x86_64/bin/java -classpath /var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/Maven/boot/* -Dmaven.home=/var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/Maven -Dmaven.conf=/var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/Maven/conf -DbuildInfoConfig.propertiesFile=/var/lib/jenkins/workspace/k8ssh@tmp/artifactory/buildInfo650725152177383222.properties -DbuildInfoConfig.artifactoryResolutionEnabled=true -Dm3plugin.lib=/var/lib/jenkins/workspace/k8ssh@tmp/artifactory/cache/artifactory-plugin/3.6.2 -Dclassworlds.conf=/var/lib/jenkins/workspace/k8ssh@tmp/artifactory/classworlds505655879803877441conf -Dmaven.multiModuleProjectDirectory=/var/lib/jenkins/workspace/k8ssh org.codehaus.plexus.classworlds.launcher.Launcher -f pom.xml clean install
[2020-06-02T13:40:28.601Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - Scanning for projects...
[2020-06-02T13:40:28.732Z] [main] WARNING org.apache.maven.graph.DefaultGraphBuilder - 
[2020-06-02T13:40:28.732Z] [main] WARNING org.apache.maven.graph.DefaultGraphBuilder - Some problems were encountered while building the effective model for com.example.maven-project:server:jar:1.0-SNAPSHOT
[2020-06-02T13:40:28.737Z] [main] WARNING org.apache.maven.graph.DefaultGraphBuilder - Reporting configuration should be done in <reporting> section, not in maven-site-plugin <configuration> as reportPlugins parameter.
[2020-06-02T13:40:28.737Z] [main] WARNING org.apache.maven.graph.DefaultGraphBuilder - 
[2020-06-02T13:40:28.737Z] [main] WARNING org.apache.maven.graph.DefaultGraphBuilder - Some problems were encountered while building the effective model for com.example.maven-project:webapp:war:1.0-SNAPSHOT
[2020-06-02T13:40:28.743Z] [main] WARNING org.apache.maven.graph.DefaultGraphBuilder - Reporting configuration should be done in <reporting> section, not in maven-site-plugin <configuration> as reportPlugins parameter.
[2020-06-02T13:40:28.743Z] [main] WARNING org.apache.maven.graph.DefaultGraphBuilder - 
[2020-06-02T13:40:28.748Z] [main] WARNING org.apache.maven.graph.DefaultGraphBuilder - Some problems were encountered while building the effective model for com.example.maven-project:maven-project:pom:1.0-SNAPSHOT
[2020-06-02T13:40:28.750Z] [main] WARNING org.apache.maven.graph.DefaultGraphBuilder - Reporting configuration should be done in <reporting> section, not in maven-site-plugin <configuration> as reportPlugins parameter. @ line 51, column 24
[2020-06-02T13:40:28.750Z] [main] WARNING org.apache.maven.graph.DefaultGraphBuilder - 
[2020-06-02T13:40:28.753Z] [main] WARNING org.apache.maven.graph.DefaultGraphBuilder - It is highly recommended to fix these problems because they threaten the stability of your build.
[2020-06-02T13:40:28.755Z] [main] WARNING org.apache.maven.graph.DefaultGraphBuilder - 
[2020-06-02T13:40:28.771Z] [main] WARNING org.apache.maven.graph.DefaultGraphBuilder - For this reason, future Maven versions might no longer support building such malformed projects.
[2020-06-02T13:40:28.771Z] [main] WARNING org.apache.maven.graph.DefaultGraphBuilder - 
[2020-06-02T13:40:28.814Z] [main] WARNING org.apache.maven.DefaultMaven - The project com.example.maven-project:maven-project:pom:1.0-SNAPSHOT uses prerequisites which is only intended for maven-plugin projects but not for non maven-plugin projects. For such purposes you should use the maven-enforcer-plugin. See https://maven.apache.org/enforcer/enforcer-rules/requireMavenVersion.html
[2020-06-02T13:40:28.814Z] [main] INFO org.jfrog.build.extractor.maven.BuildInfoRecorder - Initializing Artifactory Build-Info Recording
[2020-06-02T13:40:28.825Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - ------------------------------------------------------------------------
[2020-06-02T13:40:28.825Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - Reactor Build Order:
[2020-06-02T13:40:28.825Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:28.825Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - Maven Project                                                      [pom]
[2020-06-02T13:40:28.825Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - Server                                                             [jar]
[2020-06-02T13:40:28.825Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - Webapp                                                             [war]
[2020-06-02T13:40:28.839Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:28.839Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --------------< com.example.maven-project:maven-project >---------------
[2020-06-02T13:40:28.839Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - Building Maven Project 1.0-SNAPSHOT                                [1/3]
[2020-06-02T13:40:28.839Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --------------------------------[ pom ]---------------------------------
[2020-06-02T13:40:29.003Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:29.009Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --- maven-clean-plugin:2.5:clean (default-clean) @ maven-project ---
[2020-06-02T13:40:29.169Z] [main] INFO org.apache.maven.plugin.clean.CleanMojo - Deleting /var/lib/jenkins/workspace/k8ssh/target
[2020-06-02T13:40:29.180Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:29.180Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --- maven-install-plugin:2.4:install (default-install) @ maven-project ---
[2020-06-02T13:40:29.373Z] [main] INFO org.codehaus.plexus.PlexusContainer - Installing /var/lib/jenkins/workspace/k8ssh/pom.xml to /var/lib/jenkins/.m2/repository/com/example/maven-project/maven-project/1.0-SNAPSHOT/maven-project-1.0-SNAPSHOT.pom
[2020-06-02T13:40:29.421Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:29.421Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - ------------------< com.example.maven-project:server >------------------
[2020-06-02T13:40:29.421Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - Building Server 1.0-SNAPSHOT                                       [2/3]
[2020-06-02T13:40:29.421Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --------------------------------[ jar ]---------------------------------
[2020-06-02T13:40:29.587Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:29.587Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --- maven-clean-plugin:2.5:clean (default-clean) @ server ---
[2020-06-02T13:40:29.591Z] [main] INFO org.apache.maven.plugin.clean.CleanMojo - Deleting /var/lib/jenkins/workspace/k8ssh/server/target
[2020-06-02T13:40:29.597Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:29.597Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --- maven-resources-plugin:2.5:resources (default-resources) @ server ---
[2020-06-02T13:40:29.750Z] [debug] execute contextualize
[2020-06-02T13:40:29.758Z] [main] INFO org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering - Using 'utf-8' encoding to copy filtered resources.
[2020-06-02T13:40:29.764Z] [main] INFO org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering - skip non existing resourceDirectory /var/lib/jenkins/workspace/k8ssh/server/src/main/resources
[2020-06-02T13:40:29.764Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:29.764Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --- maven-compiler-plugin:2.3.2:compile (default-compile) @ server ---
[2020-06-02T13:40:29.859Z] [main] INFO org.codehaus.plexus.compiler.javac.JavacCompiler - Compiling 1 source file to /var/lib/jenkins/workspace/k8ssh/server/target/classes
[2020-06-02T13:40:30.386Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:30.386Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --- maven-resources-plugin:2.5:testResources (default-testResources) @ server ---
[2020-06-02T13:40:30.389Z] [debug] execute contextualize
[2020-06-02T13:40:30.400Z] [main] INFO org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering - Using 'utf-8' encoding to copy filtered resources.
[2020-06-02T13:40:30.400Z] [main] INFO org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering - skip non existing resourceDirectory /var/lib/jenkins/workspace/k8ssh/server/src/test/resources
[2020-06-02T13:40:30.400Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:30.400Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ server ---
[2020-06-02T13:40:30.400Z] [main] INFO org.codehaus.plexus.compiler.javac.JavacCompiler - Compiling 1 source file to /var/lib/jenkins/workspace/k8ssh/server/target/test-classes
[2020-06-02T13:40:30.865Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:30.865Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --- maven-surefire-plugin:2.11:test (default-test) @ server ---
[2020-06-02T13:40:31.082Z] [main] INFO org.apache.maven.plugin.surefire.SurefirePlugin - Surefire report directory: /var/lib/jenkins/workspace/k8ssh/server/target/surefire-reports
[2020-06-02T13:40:31.199Z] 
[2020-06-02T13:40:31.199Z] -------------------------------------------------------
[2020-06-02T13:40:31.199Z]  T E S T S
[2020-06-02T13:40:31.199Z] -------------------------------------------------------
[2020-06-02T13:40:31.634Z] Running com.example.TestGreeter
[2020-06-02T13:40:31.766Z] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.133 sec
[2020-06-02T13:40:31.785Z] 
[2020-06-02T13:40:31.785Z] Results :
[2020-06-02T13:40:31.785Z] 
[2020-06-02T13:40:31.785Z] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0
[2020-06-02T13:40:31.785Z] 
[2020-06-02T13:40:31.872Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:31.872Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --- maven-jar-plugin:2.4:jar (default-jar) @ server ---
[2020-06-02T13:40:32.076Z] [main] INFO org.codehaus.plexus.archiver.jar.JarArchiver - Building jar: /var/lib/jenkins/workspace/k8ssh/server/target/server.jar
[2020-06-02T13:40:32.089Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:32.092Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --- maven-install-plugin:2.4:install (default-install) @ server ---
[2020-06-02T13:40:32.097Z] [main] INFO org.codehaus.plexus.PlexusContainer - Installing /var/lib/jenkins/workspace/k8ssh/server/target/server.jar to /var/lib/jenkins/.m2/repository/com/example/maven-project/server/1.0-SNAPSHOT/server-1.0-SNAPSHOT.jar
[2020-06-02T13:40:32.097Z] [main] INFO org.codehaus.plexus.PlexusContainer - Installing /var/lib/jenkins/workspace/k8ssh/server/pom.xml to /var/lib/jenkins/.m2/repository/com/example/maven-project/server/1.0-SNAPSHOT/server-1.0-SNAPSHOT.pom
[2020-06-02T13:40:32.170Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:32.170Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - ------------------< com.example.maven-project:webapp >------------------
[2020-06-02T13:40:32.170Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - Building Webapp 1.0-SNAPSHOT                                       [3/3]
[2020-06-02T13:40:32.170Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --------------------------------[ war ]---------------------------------
[2020-06-02T13:40:32.190Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:32.190Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --- maven-clean-plugin:2.5:clean (default-clean) @ webapp ---
[2020-06-02T13:40:32.193Z] [main] INFO org.apache.maven.plugin.clean.CleanMojo - Deleting /var/lib/jenkins/workspace/k8ssh/webapp/target
[2020-06-02T13:40:32.193Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:32.193Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --- maven-resources-plugin:2.5:resources (default-resources) @ webapp ---
[2020-06-02T13:40:32.194Z] [debug] execute contextualize
[2020-06-02T13:40:32.200Z] [main] INFO org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering - Using 'utf-8' encoding to copy filtered resources.
[2020-06-02T13:40:32.200Z] [main] INFO org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering - skip non existing resourceDirectory /var/lib/jenkins/workspace/k8ssh/webapp/src/main/resources
[2020-06-02T13:40:32.200Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:32.200Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --- maven-compiler-plugin:2.3.2:compile (default-compile) @ webapp ---
[2020-06-02T13:40:32.205Z] [debug] execute contextualize
[2020-06-02T13:40:32.205Z] [main] INFO org.apache.maven.plugin.CompilerMojo - No sources to compile
[2020-06-02T13:40:32.205Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:32.205Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --- maven-resources-plugin:2.5:testResources (default-testResources) @ webapp ---
[2020-06-02T13:40:32.216Z] [main] INFO org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering - Using 'utf-8' encoding to copy filtered resources.
[2020-06-02T13:40:32.216Z] [main] INFO org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering - skip non existing resourceDirectory /var/lib/jenkins/workspace/k8ssh/webapp/src/test/resources
[2020-06-02T13:40:32.216Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:32.216Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ webapp ---
[2020-06-02T13:40:32.216Z] [main] INFO org.apache.maven.plugin.TestCompilerMojo - No sources to compile
[2020-06-02T13:40:32.216Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:32.216Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --- maven-surefire-plugin:2.11:test (default-test) @ webapp ---
[2020-06-02T13:40:32.224Z] [main] INFO org.apache.maven.plugin.surefire.SurefirePlugin - No tests to run.
[2020-06-02T13:40:32.224Z] [main] INFO org.apache.maven.plugin.surefire.SurefirePlugin - Surefire report directory: /var/lib/jenkins/workspace/k8ssh/webapp/target/surefire-reports
[2020-06-02T13:40:32.262Z] 
[2020-06-02T13:40:32.262Z] -------------------------------------------------------
[2020-06-02T13:40:32.262Z]  T E S T S
[2020-06-02T13:40:32.262Z] -------------------------------------------------------
[2020-06-02T13:40:32.494Z] 
[2020-06-02T13:40:32.494Z] Results :
[2020-06-02T13:40:32.494Z] 
[2020-06-02T13:40:32.494Z] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0
[2020-06-02T13:40:32.494Z] 
[2020-06-02T13:40:32.494Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:32.494Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --- maven-war-plugin:2.2:war (default-war) @ webapp ---
[2020-06-02T13:40:33.027Z] [main] INFO org.apache.maven.plugin.war.WarMojo - Packaging webapp
[2020-06-02T13:40:33.027Z] [main] INFO org.apache.maven.plugin.war.WarMojo - Assembling webapp [webapp] in [/var/lib/jenkins/workspace/k8ssh/webapp/target/webapp]
[2020-06-02T13:40:33.038Z] [main] INFO org.apache.maven.plugin.war.WarMojo - Processing war project
[2020-06-02T13:40:33.040Z] [main] INFO org.apache.maven.plugin.war.WarMojo - Copying webapp resources [/var/lib/jenkins/workspace/k8ssh/webapp/src/main/webapp]
[2020-06-02T13:40:33.060Z] [main] INFO org.apache.maven.plugin.war.WarMojo - Webapp assembled in [35 msecs]
[2020-06-02T13:40:33.093Z] [main] INFO org.codehaus.plexus.archiver.war.WarArchiver - Building war: /var/lib/jenkins/workspace/k8ssh/webapp/target/webapp.war
[2020-06-02T13:40:33.105Z] [main] INFO org.codehaus.plexus.archiver.war.WarArchiver - WEB-INF/web.xml already added, skipping
[2020-06-02T13:40:33.123Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:33.123Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - --- maven-install-plugin:2.4:install (default-install) @ webapp ---
[2020-06-02T13:40:33.123Z] [main] INFO org.codehaus.plexus.PlexusContainer - Installing /var/lib/jenkins/workspace/k8ssh/webapp/target/webapp.war to /var/lib/jenkins/.m2/repository/com/example/maven-project/webapp/1.0-SNAPSHOT/webapp-1.0-SNAPSHOT.war
[2020-06-02T13:40:33.123Z] [main] INFO org.codehaus.plexus.PlexusContainer - Installing /var/lib/jenkins/workspace/k8ssh/webapp/pom.xml to /var/lib/jenkins/.m2/repository/com/example/maven-project/webapp/1.0-SNAPSHOT/webapp-1.0-SNAPSHOT.pom
[2020-06-02T13:40:33.156Z] [main] INFO org.jfrog.build.extractor.maven.BuildDeploymentHelper - Artifactory Build Info Recorder: Saving Build Info to '/var/lib/jenkins/workspace/k8ssh/target/build-info.json'
[2020-06-02T13:40:33.555Z] [pool-1-thread-3] INFO org.jfrog.build.extractor.maven.BuildInfoClientBuilder - [pool-1-thread-3] Deploying artifact: http://104.154.78.159:8081/artifactory/libs-snapshot/com/example/maven-project/server/1.0-SNAPSHOT/server-1.0-SNAPSHOT.jar
[2020-06-02T13:40:33.556Z] [pool-1-thread-2] INFO org.jfrog.build.extractor.maven.BuildInfoClientBuilder - [pool-1-thread-2] Deploying artifact: http://104.154.78.159:8081/artifactory/libs-snapshot/com/example/maven-project/webapp/1.0-SNAPSHOT/webapp-1.0-SNAPSHOT.war
[2020-06-02T13:40:33.564Z] [pool-1-thread-1] INFO org.jfrog.build.extractor.maven.BuildInfoClientBuilder - [pool-1-thread-1] Deploying artifact: http://104.154.78.159:8081/artifactory/libs-snapshot/com/example/maven-project/maven-project/1.0-SNAPSHOT/maven-project-1.0-SNAPSHOT.pom
[2020-06-02T13:40:34.142Z] [pool-1-thread-2] INFO org.jfrog.build.extractor.maven.BuildInfoClientBuilder - [pool-1-thread-2] Deploying artifact: http://104.154.78.159:8081/artifactory/libs-snapshot/com/example/maven-project/webapp/1.0-SNAPSHOT/webapp-1.0-SNAPSHOT.pom
[2020-06-02T13:40:34.145Z] [pool-1-thread-3] INFO org.jfrog.build.extractor.maven.BuildInfoClientBuilder - [pool-1-thread-3] Deploying artifact: http://104.154.78.159:8081/artifactory/libs-snapshot/com/example/maven-project/server/1.0-SNAPSHOT/server-1.0-SNAPSHOT.pom
[2020-06-02T13:40:34.181Z] [main] INFO org.jfrog.build.extractor.maven.BuildDeploymentHelper - Artifactory Build Info Recorder: publish build info set to false, build info will not be published...
[2020-06-02T13:40:34.181Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - ------------------------------------------------------------------------
[2020-06-02T13:40:34.181Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - Reactor Summary for Maven Project 1.0-SNAPSHOT:
[2020-06-02T13:40:34.181Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - 
[2020-06-02T13:40:34.181Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - Maven Project ...................................... SUCCESS [  0.570 s]
[2020-06-02T13:40:34.181Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - Server ............................................. SUCCESS [  2.683 s]
[2020-06-02T13:40:34.181Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - Webapp ............................................. SUCCESS [  0.955 s]
[2020-06-02T13:40:34.191Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - ------------------------------------------------------------------------
[2020-06-02T13:40:34.191Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - BUILD SUCCESS
[2020-06-02T13:40:34.191Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - ------------------------------------------------------------------------
[2020-06-02T13:40:34.191Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - Total time:  5.633 s
[2020-06-02T13:40:34.191Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - Finished at: 2020-06-02T13:40:34Z
[2020-06-02T13:40:34.191Z] [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - ------------------------------------------------------------------------
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (SonarQube_Analysis)
[Pipeline] tool
[Pipeline] envVarsForTool
[Pipeline] tool
[Pipeline] envVarsForTool
[Pipeline] withEnv
[Pipeline] {
[Pipeline] script
[Pipeline] {
[Pipeline] tool
[Pipeline] }
[Pipeline] // script
[Pipeline] withSonarQubeEnv
[2020-06-02T13:40:34.582Z] Injecting SonarQube environment variables using the configuration: sonar
[Pipeline] {
[Pipeline] sh
[2020-06-02T13:40:34.879Z] + /var/lib/jenkins/tools/hudson.plugins.sonar.SonarRunnerInstallation/sonar-scanner/bin/sonar-scanner
[2020-06-02T13:40:34.880Z] INFO: Scanner configuration file: /var/lib/jenkins/tools/hudson.plugins.sonar.SonarRunnerInstallation/sonar-scanner/conf/sonar-scanner.properties
[2020-06-02T13:40:34.880Z] INFO: Project root configuration file: /var/lib/jenkins/workspace/k8ssh/sonar-project.properties
[2020-06-02T13:40:35.140Z] INFO: SonarScanner 4.3.0.2102
[2020-06-02T13:40:35.140Z] INFO: Java 1.8.0_252 Oracle Corporation (64-bit)
[2020-06-02T13:40:35.140Z] INFO: Linux 3.10.0-1127.8.2.el7.x86_64 amd64
[2020-06-02T13:40:35.391Z] INFO: User cache: /var/lib/jenkins/.sonar/cache
[2020-06-02T13:40:35.391Z] INFO: Scanner configuration file: /var/lib/jenkins/tools/hudson.plugins.sonar.SonarRunnerInstallation/sonar-scanner/conf/sonar-scanner.properties
[2020-06-02T13:40:35.391Z] INFO: Project root configuration file: /var/lib/jenkins/workspace/k8ssh/sonar-project.properties
[2020-06-02T13:40:35.391Z] INFO: Analyzing on SonarQube server 7.9.3
[2020-06-02T13:40:35.391Z] INFO: Default locale: "en_US", source code encoding: "UTF-8" (analysis is platform dependent)
[2020-06-02T13:40:35.944Z] WARN: SonarScanner will require Java 11 to run starting in SonarQube 8.x
[2020-06-02T13:40:35.944Z] INFO: Load global settings
[2020-06-02T13:40:36.195Z] INFO: Load global settings (done) | time=101ms
[2020-06-02T13:40:36.195Z] INFO: Server id: BF41A1F2-AXJgUcNe9mVD4qJ5h4rl
[2020-06-02T13:40:36.195Z] INFO: User cache: /var/lib/jenkins/.sonar/cache
[2020-06-02T13:40:36.195Z] INFO: Load/download plugins
[2020-06-02T13:40:36.195Z] INFO: Load plugins index
[2020-06-02T13:40:36.195Z] INFO: Load plugins index (done) | time=47ms
[2020-06-02T13:40:36.195Z] INFO: Load/download plugins (done) | time=87ms
[2020-06-02T13:40:37.110Z] INFO: Process project properties
[2020-06-02T13:40:37.110Z] INFO: Execute project builders
[2020-06-02T13:40:37.110Z] INFO: Execute project builders (done) | time=8ms
[2020-06-02T13:40:37.110Z] INFO: Project key: PipelineJks-k8-ssh
[2020-06-02T13:40:37.110Z] INFO: Base dir: /var/lib/jenkins/workspace/k8ssh
[2020-06-02T13:40:37.110Z] INFO: Working dir: /var/lib/jenkins/workspace/k8ssh/.scannerwork
[2020-06-02T13:40:37.110Z] INFO: Load project settings for component key: 'PipelineJks-k8-ssh'
[2020-06-02T13:40:37.360Z] INFO: Load project settings for component key: 'PipelineJks-k8-ssh' (done) | time=25ms
[2020-06-02T13:40:37.360Z] INFO: Load quality profiles
[2020-06-02T13:40:37.360Z] INFO: Load quality profiles (done) | time=69ms
[2020-06-02T13:40:37.360Z] INFO: Detected Jenkins
[2020-06-02T13:40:37.360Z] INFO: Load active rules
[2020-06-02T13:40:40.597Z] INFO: Load active rules (done) | time=3194ms
[2020-06-02T13:40:40.597Z] INFO: Indexing files...
[2020-06-02T13:40:40.597Z] INFO: Project configuration:
[2020-06-02T13:40:40.850Z] INFO: 2 files indexed
[2020-06-02T13:40:40.850Z] INFO: 0 files ignored because of scm ignore settings
[2020-06-02T13:40:40.850Z] INFO: Quality profile for java: Sonar way
[2020-06-02T13:40:40.850Z] INFO: ------------- Run sensors on module PipelineJks-k8-ssh
[2020-06-02T13:40:41.109Z] INFO: Load metrics repository
[2020-06-02T13:40:41.109Z] INFO: Load metrics repository (done) | time=75ms
[2020-06-02T13:40:43.613Z] INFO: Sensor JavaSquidSensor [java]
[2020-06-02T13:40:43.613Z] INFO: Configured Java source version (sonar.java.source): none
[2020-06-02T13:40:43.613Z] INFO: JavaClasspath initialization
[2020-06-02T13:40:43.613Z] WARN: Bytecode of dependencies was not provided for analysis of source files, you might end up with less precise results. Bytecode can be provided using sonar.java.libraries property.
[2020-06-02T13:40:43.613Z] INFO: JavaClasspath initialization (done) | time=16ms
[2020-06-02T13:40:43.613Z] INFO: JavaTestClasspath initialization
[2020-06-02T13:40:43.613Z] WARN: Bytecode of dependencies was not provided for analysis of test files, you might end up with less precise results. Bytecode can be provided using sonar.java.test.libraries property.
[2020-06-02T13:40:43.613Z] INFO: JavaTestClasspath initialization (done) | time=0ms
[2020-06-02T13:40:44.165Z] INFO: Java Main Files AST scan
[2020-06-02T13:40:44.165Z] INFO: 1 source files to be analyzed
[2020-06-02T13:40:44.165Z] INFO: Load project repositories
[2020-06-02T13:40:44.165Z] INFO: Load project repositories (done) | time=24ms
[2020-06-02T13:40:44.722Z] INFO: 1/1 source files have been analyzed
[2020-06-02T13:40:44.722Z] INFO: Java Main Files AST scan (done) | time=649ms
[2020-06-02T13:40:44.722Z] INFO: Java Test Files AST scan
[2020-06-02T13:40:44.722Z] INFO: 1 source files to be analyzed
[2020-06-02T13:40:44.974Z] INFO: Java Test Files AST scan (done) | time=83ms
[2020-06-02T13:40:44.974Z] INFO: Sensor JavaSquidSensor [java] (done) | time=1755ms
[2020-06-02T13:40:44.974Z] INFO: Sensor JaCoCo XML Report Importer [jacoco]
[2020-06-02T13:40:44.974Z] WARN: Report doesn't exist: '/var/lib/jenkins/workspace/k8ssh/server/target/site/jacoco/jacoco.xml'
[2020-06-02T13:40:44.974Z] INFO: Sensor JaCoCo XML Report Importer [jacoco] (done) | time=4ms
[2020-06-02T13:40:44.974Z] INFO: Sensor SurefireSensor [java]
[2020-06-02T13:40:44.974Z] INFO: parsing [/var/lib/jenkins/workspace/k8ssh/server/target/surefire-reports]
[2020-06-02T13:40:44.974Z] INFO: 1/1 source files have been analyzed
[2020-06-02T13:40:44.974Z] INFO: Sensor SurefireSensor [java] (done) | time=37ms
[2020-06-02T13:40:44.974Z] INFO: Sensor JaCoCoSensor [java]
[2020-06-02T13:40:44.974Z] INFO: JaCoCo report not found: 'server/target/jacoco.exec'
[2020-06-02T13:40:44.974Z] INFO: Sensor JaCoCoSensor [java] (done) | time=1ms
[2020-06-02T13:40:44.974Z] INFO: Sensor JavaXmlSensor [java]
[2020-06-02T13:40:44.974Z] INFO: Sensor JavaXmlSensor [java] (done) | time=1ms
[2020-06-02T13:40:44.974Z] INFO: Sensor HTML [web]
[2020-06-02T13:40:44.974Z] INFO: Sensor HTML [web] (done) | time=17ms
[2020-06-02T13:40:44.974Z] INFO: ------------- Run sensors on project
[2020-06-02T13:40:44.974Z] INFO: Sensor Zero Coverage Sensor
[2020-06-02T13:40:44.974Z] INFO: Sensor Zero Coverage Sensor (done) | time=9ms
[2020-06-02T13:40:44.974Z] INFO: Sensor Java CPD Block Indexer
[2020-06-02T13:40:44.974Z] INFO: Sensor Java CPD Block Indexer (done) | time=14ms
[2020-06-02T13:40:44.974Z] INFO: 1 file had no CPD blocks
[2020-06-02T13:40:44.974Z] INFO: Calculating CPD for 0 files
[2020-06-02T13:40:44.974Z] INFO: CPD calculation finished
[2020-06-02T13:40:44.974Z] INFO: Analysis report generated in 99ms, dir size=75 KB
[2020-06-02T13:40:45.225Z] INFO: Analysis report compressed in 27ms, zip size=13 KB
[2020-06-02T13:40:45.225Z] INFO: Analysis report uploaded in 26ms
[2020-06-02T13:40:45.225Z] INFO: ANALYSIS SUCCESSFUL, you can browse http://104.154.78.159:9000/dashboard?id=PipelineJks-k8-ssh
[2020-06-02T13:40:45.225Z] INFO: Note that you will be able to access the updated dashboard once the server has processed the submitted analysis report
[2020-06-02T13:40:45.225Z] INFO: More about the report processing at http://104.154.78.159:9000/api/ce/task?id=AXJ1Q09a1p1_J7hoUTTf
[2020-06-02T13:40:45.225Z] INFO: Analysis total time: 8.827 s
[2020-06-02T13:40:45.225Z] INFO: ------------------------------------------------------------------------
[2020-06-02T13:40:45.225Z] INFO: EXECUTION SUCCESS
[2020-06-02T13:40:45.225Z] INFO: ------------------------------------------------------------------------
[2020-06-02T13:40:45.225Z] INFO: Total time: 10.187s
[2020-06-02T13:40:45.225Z] INFO: Final Memory: 21M/247M
[2020-06-02T13:40:45.225Z] INFO: ------------------------------------------------------------------------
[Pipeline] }
[Pipeline] // withSonarQubeEnv
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Quality_Gate)
[Pipeline] tool
[Pipeline] envVarsForTool
[Pipeline] tool
[Pipeline] envVarsForTool
[Pipeline] withEnv
[Pipeline] {
[Pipeline] timeout
[2020-06-02T13:40:45.722Z] Timeout set to expire in 3 min 0 sec
[Pipeline] {
[Pipeline] waitForQualityGate
[2020-06-02T13:40:45.744Z] Checking status of SonarQube task 'AXJ1Q09a1p1_J7hoUTTf' on server 'sonar'
[2020-06-02T13:40:45.761Z] SonarQube task 'AXJ1Q09a1p1_J7hoUTTf' status is 'IN_PROGRESS'
[2020-06-02T13:40:48.335Z] SonarQube task 'AXJ1Q09a1p1_J7hoUTTf' status is 'SUCCESS'
[2020-06-02T13:40:48.335Z] SonarQube task 'AXJ1Q09a1p1_J7hoUTTf' completed. Quality gate is 'OK'
[Pipeline] }
[Pipeline] // timeout
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Build Docker Image)
[Pipeline] tool
[Pipeline] envVarsForTool
[Pipeline] tool
[Pipeline] envVarsForTool
[Pipeline] withEnv
[Pipeline] {
[Pipeline] sh
[2020-06-02T13:40:48.823Z] + docker build . -t dileep95/spring:0fd5a829a7d8d4d5e486fe345243b7cef2eae78b
[2020-06-02T13:40:48.823Z] Sending build context to Docker daemon 709.1 kB

[2020-06-02T13:40:48.823Z] Step 1/4 : FROM tomcat:9-alpine
[2020-06-02T13:40:48.823Z]  ---> 58d02ef62ed2
[2020-06-02T13:40:48.823Z] Step 2/4 : ADD webapp/target/*.war /usr/local/tomcat/webapps/
[2020-06-02T13:40:49.075Z]  ---> b4f045e76268
[2020-06-02T13:40:49.075Z] Removing intermediate container e389da5586bb
[2020-06-02T13:40:49.075Z] Step 3/4 : RUN value=`cat conf/server.xml` && echo "${value//8080/8090}" >| conf/server.xml
[2020-06-02T13:40:49.075Z]  ---> Running in 9f7dfb5f7a23
[2020-06-02T13:40:49.075Z] 
[2020-06-02T13:40:50.425Z] [91m[0m ---> 9e9a7275590a
[2020-06-02T13:40:50.425Z] Removing intermediate container 9f7dfb5f7a23
[2020-06-02T13:40:50.425Z] Step 4/4 : CMD catalina.sh run
[2020-06-02T13:40:50.425Z]  ---> Running in 54cb3ccab636
[2020-06-02T13:40:50.425Z]  ---> 78d807f59bfd
[2020-06-02T13:40:50.425Z] Removing intermediate container 54cb3ccab636
[2020-06-02T13:40:50.425Z] Successfully built 78d807f59bfd
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Docker Push)
[Pipeline] tool
[Pipeline] envVarsForTool
[Pipeline] tool
[Pipeline] envVarsForTool
[Pipeline] withEnv
[Pipeline] {
[Pipeline] withCredentials
[2020-06-02T13:40:50.614Z] Masking supported pattern matches of $docker_user or $docker_pass
[Pipeline] {
[Pipeline] sh
[2020-06-02T13:40:50.895Z] + docker login -u **** -p ****
[2020-06-02T13:40:51.446Z] Login Succeeded
[Pipeline] sh
[2020-06-02T13:40:51.719Z] + docker push ****/spring:0fd5a829a7d8d4d5e486fe345243b7cef2eae78b
[2020-06-02T13:40:51.719Z] The push refers to a repository [docker.io/****/spring]
[2020-06-02T13:40:51.719Z] 159d1570f4f9: Preparing
[2020-06-02T13:40:51.719Z] 980b5abc68f7: Preparing
[2020-06-02T13:40:51.719Z] 3997748855d0: Preparing
[2020-06-02T13:40:51.719Z] 3a55166d29b8: Preparing
[2020-06-02T13:40:51.719Z] a854dd4eaee0: Preparing
[2020-06-02T13:40:51.719Z] 3c67124130ec: Preparing
[2020-06-02T13:40:51.719Z] f8f564cb1419: Preparing
[2020-06-02T13:40:51.719Z] 638d4576a926: Preparing
[2020-06-02T13:40:51.719Z] c9b26f41504c: Preparing
[2020-06-02T13:40:51.719Z] cd7100a72410: Preparing
[2020-06-02T13:40:51.719Z] 3c67124130ec: Waiting
[2020-06-02T13:40:51.719Z] f8f564cb1419: Waiting
[2020-06-02T13:40:51.719Z] 638d4576a926: Waiting
[2020-06-02T13:40:51.719Z] c9b26f41504c: Waiting
[2020-06-02T13:40:51.719Z] cd7100a72410: Waiting
[2020-06-02T13:40:52.270Z] a854dd4eaee0: Layer already exists
[2020-06-02T13:40:52.270Z] 3997748855d0: Layer already exists
[2020-06-02T13:40:52.270Z] 3a55166d29b8: Layer already exists
[2020-06-02T13:40:52.270Z] f8f564cb1419: Layer already exists
[2020-06-02T13:40:52.270Z] 3c67124130ec: Layer already exists
[2020-06-02T13:40:52.270Z] 638d4576a926: Layer already exists
[2020-06-02T13:40:52.521Z] c9b26f41504c: Layer already exists
[2020-06-02T13:40:52.521Z] cd7100a72410: Layer already exists
[2020-06-02T13:40:53.864Z] 980b5abc68f7: Pushed
[2020-06-02T13:40:53.864Z] 159d1570f4f9: Pushed
[2020-06-02T13:40:57.093Z] 0fd5a829a7d8d4d5e486fe345243b7cef2eae78b: digest: sha256:08dd19c5c5d88e9cc5982ed15f59f31532eb7d31da12ace1e84b61f523963ff1 size: 2410
[Pipeline] }
[Pipeline] // withCredentials
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (ssh)
[Pipeline] tool
[Pipeline] envVarsForTool
[Pipeline] tool
[Pipeline] envVarsForTool
[Pipeline] withEnv
[Pipeline] {
[Pipeline] sh
[2020-06-02T13:40:57.557Z] + chmod +x replace.sh
[Pipeline] sh
[2020-06-02T13:40:57.835Z] + ./replace.sh 0fd5a829a7d8d4d5e486fe345243b7cef2eae78b
[Pipeline] sshagent
[2020-06-02T13:40:57.859Z] [ssh-agent] Using credentials prithdileep (k8s)
[2020-06-02T13:40:57.859Z] [ssh-agent] Looking for ssh-agent implementation...
[2020-06-02T13:40:57.876Z] [ssh-agent]   Exec ssh-agent (binary ssh-agent on a remote machine)
[2020-06-02T13:40:57.876Z] $ ssh-agent
[2020-06-02T13:40:57.893Z] SSH_AUTH_SOCK=/tmp/ssh-LZJnKDdYbFU0/agent.6965
[2020-06-02T13:40:57.893Z] SSH_AGENT_PID=6968
[2020-06-02T13:40:57.893Z] Running ssh-add (command line suppressed)
[2020-06-02T13:40:57.905Z] Identity added: /var/lib/jenkins/workspace/k8ssh@tmp/private_key_6859673636028961685.key (/var/lib/jenkins/workspace/k8ssh@tmp/private_key_6859673636028961685.key)
[2020-06-02T13:40:57.906Z] [ssh-agent] Started.
[Pipeline] {
[Pipeline] sh
[2020-06-02T13:40:58.185Z] + scp -o StrictHostKeyChecking=no services.yml changed-deploy.yml services.yml prithdileep@104.154.78.159:/home/prithdileep
[Pipeline] script
[Pipeline] {
[Pipeline] sh
[2020-06-02T13:40:58.724Z] + ssh prithdileep@104.154.78.159 kubectl delete all --all
[2020-06-02T13:40:58.975Z] pod "web-deployment-57fb5d9fd9-c827l" deleted
[2020-06-02T13:40:58.975Z] pod "web-deployment-57fb5d9fd9-vwrmt" deleted
[2020-06-02T13:40:58.975Z] pod "web-pod" deleted
[2020-06-02T13:40:59.231Z] service "kubernetes" deleted
[2020-06-02T13:40:59.231Z] service "web-service" deleted
[2020-06-02T13:40:59.231Z] deployment.apps "web-deployment" deleted
[2020-06-02T13:40:59.231Z] replicaset.apps "web-deployment-57fb5d9fd9" deleted
[Pipeline] sh
[2020-06-02T13:41:11.601Z] + ssh prithdileep@104.154.78.159 kubectl create -f .
[2020-06-02T13:41:12.152Z] deployment.apps/web-deployment created
[2020-06-02T13:41:12.152Z] pod/web-pod created
[2020-06-02T13:41:12.152Z] service/web-service created
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[2020-06-02T13:41:12.195Z] $ ssh-agent -k
[2020-06-02T13:41:12.216Z] unset SSH_AUTH_SOCK;
[2020-06-02T13:41:12.216Z] unset SSH_AGENT_PID;
[2020-06-02T13:41:12.216Z] echo Agent pid 6968 killed;
[2020-06-02T13:41:12.218Z] [ssh-agent] Stopped.
[Pipeline] // sshagent
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Declarative: Post Actions)
[Pipeline] sh
[2020-06-02T13:41:12.649Z] + echo 'This will always run'
[2020-06-02T13:41:12.649Z] This will always run
[Pipeline] mail
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // timestamps
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
Finished: SUCCESS
